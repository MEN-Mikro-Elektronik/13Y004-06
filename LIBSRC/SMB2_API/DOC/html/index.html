<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>MEN - SMB2_API - Main Page</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Language" content="en, english">
<meta name="Copyright" content="All material copyright MEN Mikro Elektronik GmbH">
<link href="men_stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class="left_to_right" style="padding-top: 6px; background-color: #F0F0F0; height: 110px; border-bottom: 2px solid #D1D1D2;">
	<!-- Titel -->
	<img src="menlogo.gif" alt="MEN" style="float: left; height: 103px; width: 155px; margin: 0px;">
	<h1 style="margin: 0px; padding-top: 35px; padding-bottom: 0px;">SMB2_API &nbsp; </h1>
	<h3>Main Page</h3>
</div>

<div class="left_to_right">
<!-- Hauptteil -->
	<div class="main">
<!-- Generated by Doxygen 1.3 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="annotated.html">Data Structures</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Data Fields</a> &nbsp; <a class="qindex" href="globals.html">Globals</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; <a class="qindex" href="examples.html">Examples</a> &nbsp; </center>
<hr><h1>SMB2_API Documentation</h1>
<p>
This document describes the SMB2_API features of the SMB2 MDIS5 driver, a generic driver for SMBus devices (e.g. EEPROMS).<p>
The software package consists of the SMB2 MDIS5 driver, the SMB2_API C library and example applications (SMB2_SIMP, SMB2_CTRL, SMB2_BOARDIDENT see Examples section).<p>
Note: MDIS5 32bit drivers are compatible to the MDIS4 drivers but must not be mixed with MDIS4 drivers at one target system.<br>
<br>
<h2><a name="FuncOv"></a>
Functional Overview</h2>
<br>
 <h2>!!! Please be careful when you write to SMBus devices. !!!</h2>
<h2>!!! Otherwise you may destroy important data (e.g. on EEPROMs) or you may cause damage to the HW. !!!</h2>
<br>
<p>
The SMB2_API library provides user mode applications access to devices on a SMBus. The library uses internal the MDIS_API to communicate with the MDIS5 SMB2 driver. The SMB2 driver uses the SMB2 kernel mode library supplied by a BBIS board driver or a BSP to control a individual SMBus controller. <a class="el" href="_smb2_swmodules.html">SMB2 Software Module Structure</a><p>
SMB2_API reflects the SMB2 library functions via the SMB2 MDIS5 driver to user mode applications. The SMB2_API library must be initialized with <a class="el" href="group____SMB2__API.html#a1">SMB2API_Init()</a> and deinitialized with <a class="el" href="group____SMB2__API.html#a2">SMB2API_Exit()</a>. The <a class="el" href="group____SMB2__API.html#a16">SMB2API_Errstring()</a> function converts an SMB2 error code (<a class="el" href="group____SMB2__ERR.html">SMB_ERR_X Error Codes</a>) or MDIS error code into an error message string.<p>
The main features of the SMB2_API are:<p>
<b>Single read/write</b><br>
<ul>
<li>Write/Read one data byte <a class="el" href="group____SMB2__API.html#a4">SMB2API_WriteByte()</a>, <a class="el" href="group____SMB2__API.html#a5">SMB2API_ReadByte()</a></li><li>Write command and write/read one data byte <a class="el" href="group____SMB2__API.html#a6">SMB2API_WriteByteData()</a>, <a class="el" href="group____SMB2__API.html#a7">SMB2API_ReadByteData()</a></li><li>Write command and write/read one data word <a class="el" href="group____SMB2__API.html#a8">SMB2API_WriteWordData()</a>, <a class="el" href="group____SMB2__API.html#a9">SMB2API_ReadWordData()</a></li><li>Write command and one data word, then read one data word <a class="el" href="group____SMB2__API.html#a12">SMB2API_ProcessCall()</a></li></ul>
<p>
<b>Block read/write</b><br>
<ul>
<li>Writes command and write/read a data block <a class="el" href="group____SMB2__API.html#a10">SMB2API_WriteBlockData()</a>, <a class="el" href="group____SMB2__API.html#a11">SMB2API_ReadBlockData()</a></li><li>Write command and data block, then read data block <a class="el" href="group____SMB2__API.html#a13">SMB2API_BlockProcessCall()</a></li></ul>
<p>
<b>Other read/write</b><br>
<ul>
<li>Quick command <a class="el" href="group____SMB2__API.html#a3">SMB2API_QuickComm()</a></li><li>Read/write using the I2C protocol <a class="el" href="group____SMB2__API.html#a15">SMB2API_I2CXfer()</a></li></ul>
<p>
<b>Alert support</b><br>
<ul>
<li>Issue a read byte command to the Alert Response Address <a class="el" href="group____SMB2__API.html#a17">SMB2API_AlertResponse()</a></li><li>Install/remove alert callback function <a class="el" href="group____SMB2__API.html#a18">SMB2API_AlertCbInstall()</a>, <a class="el" href="group____SMB2__API.html#a19">SMB2API_AlertCbInstallSig()</a>, <a class="el" href="group____SMB2__API.html#a20">SMB2API_AlertCbRemove()</a></li></ul>
<p>
<b>Unsupported SMB2 library functions</b><br>
<ul>
<li><a class="el" href="group____SMB2__API.html#a14">SMB2API_SmbXfer()</a><br>
</li></ul>
<p>
<br>
 <h3><a name="smb2_api_call"></a>
Calling SMB2_API functions</h3>
The SMB2_API functions can be called either directly or via the SMB-Handle (see <a class="el" href="structSMB__ENTRIES.html">SMB_ENTRIES</a> struct):<p>
Calling a SMB2_API function directly, example: <div class="fragment"><pre>

  err = SMB2API_ReadByte( smbHdl, 0x00, addr, &amp;byte ); </pre></div><p>
<br>
 Calling a SMB2_API function over the SMB-Handle. This simplifies to port kernel mode software to user mode software modules. Example:<p>
<div class="fragment"><pre>

  err = ((SMB_HANDLE*)smbHdl)-&gt;ReadByte( smbHdl, 0x00, addr, &amp;byte ); </pre></div><br>
<p>
<br>
 <h2><a name="descriptor_entries"></a>
SMB2 Driver Descriptor Entries</h2>
<br>
<p>
The low-level driver initialization routine decodes the following entries ("keys") in addition to the general descriptor keys:<p>
<table border="0" cellspacing="3" cellpadding="3">
<tr>
<td><b>Descriptor entry</b> </td><td><b>Description</b> </td><td><b>Values</b>  </td></tr>
<tr>
<td>SMB_BUSNBR </td><td>SMBus bus number </td><td>0..n<br>
 Default: none   </td></tr>
<tr>
<td>SMB_DEVS_ONLY </td><td>Array of only allowed SMB device addresses (all addresses if not set) </td><td>0x00..0xff,0x00..0xff,..<br>
 Default: none  </td></tr>
</table>
<p>
<br>
 <h3><a name="smb2_min"></a>
Minimum descriptor</h3>
smb2_min.dsc (see Examples section)<br>
 Demonstrates the minimum set of options necessary for using the driver.<p>
<br>
 <h3><a name="smb2_max"></a>
Maximum descriptor</h3>
smb2_max.dsc (see Examples section)<br>
 Shows all possible configuration options for this driver.
	</div>
</div>

<div class="footer">
<!-- Footer -->
	<p class="footer">
	Generated for SMB2_API using <a href="http://www.doxygen.org">doxygen</a>. All Rights Reserved.
	</p>
</div>

</body>
</html>

