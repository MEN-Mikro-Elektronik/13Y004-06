<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>MEN - SMB2_API - Main Page</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Language" content="en, english">
<meta name="Copyright" content="All material copyright MEN Mikro Elektronik GmbH">
<link href="men_stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="left_to_right" style="padding-top: 6px; background-color: #F0F0F0; height: 110px; border-bottom: 2px solid #D1D1D2;">
	<!-- Titel -->
	<img src="menlogo.gif" alt="MEN" style="float: left; height: 103px; width: 155px; margin: 0px;">
	<h1 style="margin: 0px; padding-top: 35px; padding-bottom: 0px;">SMB2_API &nbsp; </h1>
	<h3>Main Page</h3>
</div>
<div class="left_to_right">
<!-- Hauptteil -->
	<div class="main">
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SMB2_API Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This document describes the SMB2_API features of the SMB2 MDIS5 driver, a generic driver for SMBus devices (e.g. EEPROMS).</p>
<p>The software package consists of the SMB2 MDIS5 driver, the SMB2_API C library and example applications (SMB2_SIMP, SMB2_CTRL, SMB2_BOARDIDENT see Examples section).</p>
<p>Note: MDIS5 32bit drivers are compatible to the MDIS4 drivers but must not be mixed with MDIS4 drivers at one target system.<br />
<br />
 </p>
<h1><a class="anchor" id="FuncOv"></a>
Functional Overview</h1>
<p><br />
</p><h2>!!! Please be careful when you write to SMBus devices. !!!</h2>
<h2>!!! Otherwise you may destroy important data (e.g. on EEPROMs) or you may cause damage to the HW. !!!</h2>
<p><br />
 The SMB2_API library provides user mode applications access to devices on a SMBus. The library uses internal the MDIS_API to communicate with the MDIS5 SMB2 driver. The SMB2 driver uses the SMB2 kernel mode library supplied by a BBIS board driver or a BSP to control a individual SMBus controller. <a class="el" href="_smb2_swmodules.html">SMB2 Software Module Structure</a></p>
<p>SMB2_API reflects the SMB2 library functions via the SMB2 MDIS5 driver to user mode applications. The SMB2_API library must be initialized with <a class="el" href="group____SMB2__API.html#ga53a354153e94c575fa042ade27c3b59a" title="Initialize library. ">SMB2API_Init()</a> and deinitialized with <a class="el" href="group____SMB2__API.html#gae4e401c87a01856fdfcb0373991079fd" title="Exit library. ">SMB2API_Exit()</a>. The <a class="el" href="group____SMB2__API.html#gaaae8c135a24181079a574e652a7de575" title="Convert SMB2 and MDIS error code to string. ">SMB2API_Errstring()</a> function converts an SMB2 error code (_SMB2_ERR) or MDIS error code into an error message string.</p>
<p>The main features of the SMB2_API are:</p>
<p><b>Single read/write</b><br />
</p><ul>
<li>Write/Read one data byte <a class="el" href="group____SMB2__API.html#gadfd5948af33fecce03acf405db6b3aff" title="Write one data byte to a SMB device. ">SMB2API_WriteByte()</a>, <a class="el" href="group____SMB2__API.html#ga9ca58eb6447ae3d38391b068e0621cfd" title="Read one data byte from a SMB device. ">SMB2API_ReadByte()</a></li>
<li>Write command and write/read one data byte <a class="el" href="group____SMB2__API.html#gad3e54c00c5ee7ab1fbda4fd158ba6ffb" title="Write command and one data byte to a SMB device. ">SMB2API_WriteByteData()</a>, <a class="el" href="group____SMB2__API.html#gac52a9f828fca4d887202a729183fdf55" title="Write command and READ one data byte from a SMB device. ">SMB2API_ReadByteData()</a></li>
<li>Write command and write/read one data word <a class="el" href="group____SMB2__API.html#ga415f1af5f9f14e8659303b927941cfcc" title="Write command and one data word to a SMB device. ">SMB2API_WriteWordData()</a>, <a class="el" href="group____SMB2__API.html#ga464d7cf007348b5d980a815206b00b7b" title="Write command and READ one data word from a SMB device. ">SMB2API_ReadWordData()</a></li>
<li>Write command and one data word, then read one data word <a class="el" href="group____SMB2__API.html#ga9a0d8ab589e82b7e42d1c8e2e7455b3f" title="Write command and one data word, then read one data word from a SMB device. ">SMB2API_ProcessCall()</a></li>
</ul>
<p><b>Block read/write</b><br />
</p><ul>
<li>Writes command and write/read a data block <a class="el" href="group____SMB2__API.html#ga4052b3ddbdf1981aa41c2d61cd62d361" title="Writes command and a data block to a SMB device. ">SMB2API_WriteBlockData()</a>, <a class="el" href="group____SMB2__API.html#gadf991fbccf6a075550d91e6fd35f1456" title="Write command and READ one data block from a SMB device. ">SMB2API_ReadBlockData()</a></li>
<li>Write command and data block, then read data block <a class="el" href="group____SMB2__API.html#ga269b91dd089f9d7a6db39c3d8cb8b80e" title="Write command and data block, then read data block from a SMB device. ">SMB2API_BlockProcessCall()</a></li>
</ul>
<p><b>Other read/write</b><br />
</p><ul>
<li>Quick command <a class="el" href="group____SMB2__API.html#ga04cbc246415b93f00a30d5e046dfa3d9" title="Quick command to a SMB device. ">SMB2API_QuickComm()</a></li>
<li>Read/write using the I2C protocol <a class="el" href="group____SMB2__API.html#ga9a25686d1d61f113957b9740531cb2cb" title="Read from / write to a SMB device using the I2C protocol. ">SMB2API_I2CXfer()</a></li>
</ul>
<p><b>Alert support</b><br />
</p><ul>
<li>Issue a read byte command to the Alert Response Address <a class="el" href="group____SMB2__API.html#ga62921c7b3b5e093b5126b96967b94eaf" title="Issue a read byte command to the Alert Response Address. ">SMB2API_AlertResponse()</a></li>
<li>Install/remove alert callback function <a class="el" href="group____SMB2__API.html#ga8f34d9a38fd09945ecbfe102b0bced3f" title="Install alert callback function. ">SMB2API_AlertCbInstall()</a>, <a class="el" href="group____SMB2__API.html#ga11b1f57d580f42950c858340cc03828c" title="Install alert callback function. ">SMB2API_AlertCbInstallSig()</a>, <a class="el" href="group____SMB2__API.html#gac0a187447429dd6afe35e2c321e16a60" title="Remove alert callback function. ">SMB2API_AlertCbRemove()</a></li>
</ul>
<p><b>Unsupported SMB2 library functions</b><br />
</p><ul>
<li><a class="el" href="group____SMB2__API.html#ga0ac79ba0ed32e5ccc89d39f7dfdada68" title="Read from / write to a SMB device using the SMBus protocol. ">SMB2API_SmbXfer()</a><br />
 <br />
 </li>
</ul>
<h2><a class="anchor" id="smb2_api_call"></a>
Calling SMB2_API functions</h2>
<p>The SMB2_API functions can be called either directly or via the SMB-Handle (see #SMB_ENTRIES struct):</p>
<p>Calling a SMB2_API function directly, example: </p><pre class="fragment">err = SMB2API_ReadByte( smbHdl, 0x00, addr, &amp;byte ); </pre><p><br />
Calling a SMB2_API function over the SMB-Handle. This simplifies to port kernel mode software to user mode software modules. Example:</p>
<pre class="fragment">err = ((SMB_HANDLE*)smbHdl)-&gt;ReadByte( smbHdl, 0x00, addr, &amp;byte ); </pre><p> <br />
 <br />
 </p>
<h1><a class="anchor" id="descriptor_entries"></a>
SMB2 Driver Descriptor Entries</h1>
<p><br />
 The low-level driver initialization routine decodes the following entries ("keys") in addition to the general descriptor keys:</p>
<table border="0">
<tr>
<td><b>Descriptor entry</b> </td><td><b>Description</b> </td><td><b>Values</b>  </td></tr>
<tr>
<td>SMB_BUSNBR </td><td>SMBus bus number </td><td>0..n<br />
 Default: none   </td></tr>
<tr>
<td>SMB_DEVS_ONLY </td><td>Array of only allowed SMB device addresses (all addresses if not set) </td><td>0x00..0xff,0x00..0xff,..<br />
 Default: none  </td></tr>
</table>
<p><br />
 </p>
<h2><a class="anchor" id="smb2_min"></a>
Minimum descriptor</h2>
<p>smb2_min.dsc (see Examples section)<br />
 Demonstrates the minimum set of options necessary for using the driver.</p>
<p><br />
 </p>
<h2><a class="anchor" id="smb2_max"></a>
Maximum descriptor</h2>
<p>smb2_max.dsc (see Examples section)<br />
 Shows all possible configuration options for this driver. </p>
</div></div><!-- contents -->

	</div>
</div>
<div class="footer">
<!-- Footer -->
	<p class="footer">
	Generated for SMB2_API using <a href="http://www.doxygen.org">doxygen</a>.<br>
	Copyright &copy; 2019 <a href="http://www.men.de">MEN Mikro Elektronik GmbH</a>. All Rights Reserved.
	</p>
</div>
</body>
</html>
